# Letter to Myself (Session Handoff)

**Date:** 2026-02-04 14:22 CET

## 1. Executive Summary
* **Goal:** Integrate Airtable as a lead database for the Q-Records Store Manager landing page
* **Current Status:** Airtable integration fully complete and tested

## 2. The "Done" List (Context Anchor)
* Created `.env.local` with Airtable credentials (API key, base ID, table ID)
* Created 12 fields in Airtable table `Leads` (tblgBqNy2rJN6XLW8) via API:
  - First Name, Last Name, Email, Phone, Store Name, Store City
  - Catalog Size (single select with 4 German options)
  - Current System, Message
  - Lead Status (single select: Inbound/Contacted/Qualified/Closed)
  - Source, Created At (datetime with Europe/Berlin timezone)
* Renamed Airtable table from "Table 1" to "Leads"
* Updated `src/types/index.ts` - Changed `'Status'` to `'Lead Status'` in AirtableLead interface
* Updated `src/actions/submit-demo-request.ts` - Changed field name to `'Lead Status'`
* Created test lead record (Max Mustermann, Schallplatten Paradise, Berlin)

## 3. The "Pain" Log (CRITICAL)
* **Tried:** Creating fields via Airtable API without schema permissions
* **Failed:** `INVALID_PERMISSIONS_OR_MODEL_NOT_FOUND` error
* **Workaround:** User added `schema.bases:write` scope to their API token
* *Note:* Airtable API tokens need explicit schema permissions to create/modify fields

* **Tried:** Using existing "Status" field for lead status
* **Failed:** Field already existed with wrong options (Todo/In progress/Done)
* **Workaround:** Created new field named "Lead Status" and updated code to use it

## 4. Active Variable State
* `.env.local` configured with:
  - `AIRTABLE_API_KEY` - Personal access token (stored in .env.local)
  - `AIRTABLE_BASE_ID=appJTjiLnhYIjHnGN`
  - `AIRTABLE_TABLE_NAME=tblgBqNy2rJN6XLW8`
  - Resend email config still has placeholder values (need real API key)

## 5. Immediate Next Steps
1. [ ] Configure Resend API key in `.env.local` for email functionality
2. [ ] Consider hiding/deleting unused default Airtable fields (Name, Notes, Assignee, Status, Attachments, Attachment Summary)
3. [ ] Test full demo request flow end-to-end with `npm run dev`
4. [ ] Optionally create additional Airtable views (e.g., Kanban by Lead Status)
